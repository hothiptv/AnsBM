<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>AnsBM - ADMIN PANEL</title>
    <style>
        body { background: #0d1117; color: #58a6ff; font-family: 'Segoe UI', sans-serif; display: flex; margin: 0; height: 100vh; }
        #side { width: 300px; border-right: 1px solid #30363d; padding: 20px; background: #161b22; }
        #main { flex: 1; padding: 30px; display: flex; flex-direction: column; gap: 15px; }
        .file-btn { padding: 12px; background: #21262d; border: 1px solid #30363d; color: #c9d1d9; cursor: pointer; margin-bottom: 5px; border-radius: 6px; text-align: left; }
        .file-btn:hover { border-color: #58a6ff; }
        textarea { flex: 1; background: #0d1117; color: #00ff96; border: 1px solid #30363d; padding: 15px; font-family: 'Consolas', monospace; border-radius: 8px; font-size: 14px; }
        input { background: #0d1117; color: white; border: 1px solid #30363d; padding: 12px; border-radius: 6px; }
        button#save { background: #238636; color: white; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer; }
        button#raw { background: #1f6feb; color: white; border: none; padding: 10px; border-radius: 6px; cursor: pointer; display: none; }
    </style>
</head>
<body>
    <div id="side">
        <h3>ANSBM FILES <button onclick="newF()" style="float:right">+</button></h3>
        <div id="list"></div>
    </div>
    <div id="main">
        <input type="text" id="name" placeholder="T√™n t·ªáp (v√≠ d·ª•: EvadeScript)">
        <textarea id="code" placeholder="D√°n m√£ script v√†o ƒë√¢y..."></textarea>
        <button id="save" onclick="save()">L∆ØU V√Ä ƒê·ªíNG B·ªò GITHUB</button>
        <button id="raw" onclick="copyRaw()">COPY LINK RAW</button>
        <p id="status"></p>
    </div>

    <script>
        async function load() {
            const res = await fetch('/api/files');
            const data = await res.json();
            const list = document.getElementById('list');
            list.innerHTML = "";
            for (let n in data) {
                let b = document.createElement('div');
                b.className = 'file-btn';
                b.innerText = "üìÑ " + n;
                b.onclick = () => {
                    document.getElementById('name').value = n;
                    document.getElementById('code').value = data[n];
                    document.getElementById('raw').style.display = "block";
                };
                list.appendChild(b);
            }
        }
        function newF() {
            document.getElementById('name').value = "";
            document.getElementById('code').value = "";
            document.getElementById('raw').style.display = "none";
        }
        async function save() {
            const name = document.getElementById('name').value;
            const content = document.getElementById('code').value;
            if(!name) return alert("Nh·∫≠p t√™n file!");
            document.getElementById('status').innerText = "ƒêang l∆∞u...";
            await fetch('/api/save', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({name, content})
            });
            document.getElementById('status').innerText = "ƒê√£ l∆∞u vƒ©nh vi·ªÖn!";
            load();
        }
        function copyRaw() {
            const n = document.getElementById('name').value;
            const link = window.location.origin + "/raw/" + n;
            navigator.clipboard.writeText(link);
            alert("ƒê√£ copy link raw b·∫£o m·∫≠t!");
        }
        load();
    </script>
</body>
</html>
